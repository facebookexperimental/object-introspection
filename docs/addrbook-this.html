<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-addrbook-this" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">this pointers | Object Introspection</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://objectintrospection.org/docs/addrbook-this"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="this pointers | Object Introspection"><meta data-rh="true" name="description" content="We specify exactly which function and arguments are to be introspected through a probe specification (terminology borrowed from DTrace). It&#x27;s simply a colon delimited tuple that specifies exactly what object we are interested in and where in the code we want to observe it. For example, to introspect the AddressBook object we can measure it at the entry to its DumpContacts() method and the specification would be:"><meta data-rh="true" property="og:description" content="We specify exactly which function and arguments are to be introspected through a probe specification (terminology borrowed from DTrace). It&#x27;s simply a colon delimited tuple that specifies exactly what object we are interested in and where in the code we want to observe it. For example, to introspect the AddressBook object we can measure it at the entry to its DumpContacts() method and the specification would be:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://objectintrospection.org/docs/addrbook-this"><link data-rh="true" rel="alternate" href="https://objectintrospection.org/docs/addrbook-this" hreflang="en"><link data-rh="true" rel="alternate" href="https://objectintrospection.org/docs/addrbook-this" hreflang="x-default"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" sizes="32x32" href="img/favicon-32x32.png">
<link rel="icon" sizes="16x16" href="img/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="apple-mobile-web-app-title" content="Object Introspection">
<meta name="application-name" content="Object Introspection">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/css/styles.c07a78ed.css">
<script src="/assets/js/runtime~main.74ad5154.js" defer="defer"></script>
<script src="/assets/js/main.10c42986.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/OIBrandmark.svg" alt="OI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/OIBrandmark.svg" alt="OI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookexperimental/object-introspection" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/addrbook-intro">A Brief Practical Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/addrbook-intro">A Simple Address Book Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/addrbook-this">this pointers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/addrbook-funcargs">Function Arguments</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/constraints">Limitations and Constraints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">A Brief Practical Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">this pointers</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>this pointers</h1></header><p>We specify exactly which function and arguments are to be introspected through a <em><strong>probe specification</strong></em> (terminology borrowed from <a href="https://en.wikipedia.org/wiki/DTrace" target="_blank" rel="noopener noreferrer">DTrace</a>). It&#x27;s simply a colon delimited tuple that specifies exactly what object we are interested in and where in the code we want to observe it. For example, to introspect the <code>AddressBook</code> object we can measure it at the entry to its <code>DumpContacts()</code> method and the specification would be:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    entry:_ZN11AddressBook12DumpContactsEv:this</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are a few points to note here:</p>
<ul><li>We are using the <code>AddressBook::DumpContacts</code> method. Note that we specify the function name using the mangled C++ name which can be found using <code>readelf -sW /path/to/binary | grep symbol</code>.</li><li>We are introspecting the object itself through the <code>this</code> specifier.</li><li>We are introspecting on entry to the method but we could have chosen to introspect the object the object at the return point from the <code>AddressBook::DumpContacts()</code> method which would be useful if state had been altered during execution of he method.</li></ul>
<p>We use the <code>oid</code> debugger to capture the object itself from the address book application. Every second a contact is added to the address book with the <code>AddContact()</code> method and the address book is dumped with the <code>DumpContacts()</code> method. After running for a minute or so let&#x27;s capture the Address book object:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ build/oid -S &#x27;entry:_ZN11AddressBook12DumpContactsEv:this&#x27; -p `pgrep addrbook` -c build/oid-cfg.toml -J</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Attached to pid 4039830</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUCCESS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>-J</code> flag instructed <code>oid</code> to dump the captured objects introspection data in a JSON file:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ ~/object-introspection# ls -l oid_out.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r-- 1 root root 78975 Dec 16 20:35 oid_out.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a simple object but the resulting JSON becomes quite large when more than a handful of contacts have been added. Let&#x27;s examine some sections to see what we can glean about the object that has been captured:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ jq . oid_out.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;this&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;typePath&quot;: &quot;this&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;typeName&quot;: &quot;AddressBook&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;staticSize&quot;: 64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;dynamicSize&quot;: 23185,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;paddingSavingsSize&quot;: 4,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;members&quot;: [</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The root type is an <code>AddressBook</code> object as we&#x27;d expect and it has a static footprint of 64 bytes with its data members in total having a dynamic memory footprint of 23185 bytes.</p>
<p>The first member is simply an integer for the <code>rev</code> data member which has a 4 byte static memory footprint on this platform.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;rev&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typePath&quot;: &quot;rev&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typeName&quot;: &quot;int&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;staticSize&quot;: 4,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;dynamicSize&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next we have a <code>std::string</code> object for the top level <code>Owner</code> member. Note how this is expanded down to the base types which show the string has a static footprint of 32 bytes but we can see that it is empty as it has a <code>dynamicSize</code> of 0. The <code>capacity</code> of 15 bytes shows the Short String optimization buffer in a libstdc++ <code>std::string</code> object.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Owner&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typePath&quot;: &quot;Owner&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typeName&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;isTypedef&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;dynamicSize&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;typePath&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;typeName&quot;: &quot;basic_string&lt;char, std::char_traits&lt;char&gt;, std::alloca</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tor&lt;char&gt; &gt;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;dynamicSize&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;length&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;capacity&quot;: 15,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;elementStaticSize&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>Entries</code> member gets a bit more interesting as it introduces usage of a C++ container class, the <code>std::vector</code>. More accurately, it is a vector of <code>Contact</code> objects as can be seen in the <code>typeName</code> JSON member for the root of the <code>Entries</code> object shown below. Note that the vector currently has an allocated <code>capacity</code> of 128 <code>Contact</code> elements of which 71 are actual <code>Contact</code> objects. The 23185 bytes of dynamically allocated objects in the vector is composed of the 71 x 96 byte <code>Contact</code> objects plus whatever memory that has been dynamically allocated for string content in those objects:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Entries&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typePath&quot;: &quot;Entries&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;typeName&quot;: &quot;vector&lt;Contact, std::allocator&lt;Contact&gt; &gt;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;staticSize&quot;: 24,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;dynamicSize&quot;: 23185,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;pointer&quot;: 140720550450568,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;length&quot;: 71,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;capacity&quot;: 128,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;elementStaticSize&quot;: 96,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the sake of brevity let&#x27;s just inspect the first <code>Contact</code> object shown below. It&#x27;s static footprint at 96 bytes is the three strings at 32 bytes each. We can see that the first and third string have strings larger than the 15 bytes allocated for the short string optimization buffer and are therefore allocated in dynamic memory that is external to the string objects themselves. The second string has no dynamic memory allocated as the 14 byte character sequence it is housing fits within the 15 byte pre-allocated buffer:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;typePath&quot;: &quot;Contact[]&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;typeName&quot;: &quot;Contact&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;staticSize&quot;: 96,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;dynamicSize&quot;: 65,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;name&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typePath&quot;: &quot;firstName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typeName&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;isTypedef&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;dynamicSize&quot;: 35,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typePath&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typeName&quot;: &quot;basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;dynamicSize&quot;: 35,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;length&quot;: 35,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;capacity&quot;: 35,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;elementStaticSize&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;name&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typePath&quot;: &quot;lastName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typeName&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;isTypedef&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;dynamicSize&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typePath&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typeName&quot;: &quot;basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;dynamicSize&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;length&quot;: 14,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;capacity&quot;: 15,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;elementStaticSize&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;name&quot;: &quot;number&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typePath&quot;: &quot;number&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;typeName&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;isTypedef&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;dynamicSize&quot;: 30,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;members&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typePath&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;typeName&quot;: &quot;basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;isTypedef&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;staticSize&quot;: 32,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;dynamicSize&quot;: 30,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;length&quot;: 18,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;capacity&quot;: 30,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;elementStaticSize&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In total we have 71 <code>Contact</code> objects introspected here and each can be analyzed as we have done above:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ ~/object-introspection# jq . /tmp/oit.oit.json.fmt | grep -c &quot;\&quot;typeName\&quot;: \&quot;Contact\&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">71</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebookexperimental/object-introspection/docs/addrbook-this.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/addrbook-intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">A Simple Address Book Example</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/addrbook-funcargs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Function Arguments</div></a></nav></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Getting Started</a></li><li class="footer__item"><a href="https://youtu.be/6IlTs8YRne0" target="_blank" rel="noopener noreferrer" class="footer__link-item">CppCon 2023 Presentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://matrix.to/#/#object-introspection:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="irc://irc.oftc.net/#object-introspection" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Code</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebookexperimental/object-introspection" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>